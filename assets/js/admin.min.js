jQuery(document).ready(function(e){function n(e,n,a){var t=p.val();if(-1!==t.indexOf(e+":")){var r=e+":"+a;p.val(t.replace(new RegExp(r,"g"),e+":"+n))}else{var o=l.find(".tg-name").val();p.val(t.replace(o,o+" "+e+":"+n))}}function a(e){for(var n=e.target.value.split("\n"),a=u.children()[0].outerHTML,t=0;t<n.length;t++)a+='<option value="'+(t+1)+'">'+n[t]+"</option>";u.html(a)}function t(){-1===p.val().indexOf("default:")&&n("default",r(u.val()),"\\d")}function r(e){return e=parseInt(e),(isNaN(e)||e<1)&&(e=1),e}function o(e){n("default",r(e.target.value),"\\d")}function f(){d.off("change",a),u.off("change",o),tag_button.off("click",t),l.find("input").off("change",t),c=d=l=p=u=!1}function g(){var e="",a=h.noy.val();if(a.length>0)e=a;else{var t=h.from.val(),r=h.to.val();t.length>0&&r.length>0&&(e=t+"-"+r)}e.length>0&&n("years",e,"([0-9\\-]+)"),u.val().length>0&&n("default",u.val(),"([^\\s]+)")}function i(){h.noy.off("change",g),l.find("input").off("change",g),h.from.off("change",g),h.to.off("change",g),h={from:!1,to:!1,noy:!1},e(".ic__datepicker").off("click",g),c=l=p=u=!1}var l,c,d,p=!1,u=!1,h={from:!1,to:!1,noy:!1};e("#tag-generator-list").on("click",function(n){"rangeslider"===c?f():"datepicker"===c&&i(),"string"==typeof n.target.href&&(n.target.href.indexOf("tag-generator-panel-rangeslider")>0?(d=e("#tag-generator-panel-rangeslider-values"),u=e("#tag-generator-panel-rangeslider-default"),l=u.parents("form"),p=l.find(".tag"),tag_button=l.find(".insert-tag"),d.on("change",a),u.on("change",o),l.find("input").on("change",t),c="rangeslider"):n.target.href.indexOf("tag-generator-panel-datepicker")>0&&(u=e("#tag-generator-panel-datepicker-default"),h.noy=e("#tag-generator-panel-datepicker-noy"),h.noy.on("change",g),l=h.noy.parents("form"),p=l.find(".tag"),l.find("input").on("change",g),h.from=e("#tag-generator-panel-datepicker-range-from"),h.to=e("#tag-generator-panel-datepicker-range-to"),h.from.on("change",g),h.to.on("change",g),e(".ic__datepicker").on("click",g),c="datepicker"))})});